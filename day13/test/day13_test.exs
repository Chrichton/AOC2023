defmodule Day13Test do
  use ExUnit.Case

  test "read_input" do
    assert Day13.read_input("sample") ==
             [
               [
                 ["#", ".", "#", "#", ".", ".", "#", "#", "."],
                 [".", ".", "#", ".", "#", "#", ".", "#", "."],
                 ["#", "#", ".", ".", ".", ".", ".", ".", "#"],
                 ["#", "#", ".", ".", ".", ".", ".", ".", "#"],
                 [".", ".", "#", ".", "#", "#", ".", "#", "."],
                 [".", ".", "#", "#", ".", ".", "#", "#", "."],
                 ["#", ".", "#", ".", "#", "#", ".", "#", "."]
               ],
               [
                 ["#", ".", ".", ".", "#", "#", ".", ".", "#"],
                 ["#", ".", ".", ".", ".", "#", ".", ".", "#"],
                 [".", ".", "#", "#", ".", ".", "#", "#", "#"],
                 ["#", "#", "#", "#", "#", ".", "#", "#", "."],
                 ["#", "#", "#", "#", "#", ".", "#", "#", "."],
                 [".", ".", "#", "#", ".", ".", "#", "#", "#"],
                 ["#", ".", ".", ".", ".", "#", ".", ".", "#"]
               ]
             ]
  end

  test "sample" do
    assert Day13.solve("sample") == 405
  end

  test "star" do
    assert Day13.solve("star") == 35360
  end

  test "line_with_fixed_snudge" do
    grid = [
      ["#", ".", ".", ".", "#", "#", ".", ".", "#"],
      ["#", ".", ".", ".", ".", "#", ".", ".", "#"],
      [".", ".", "#", "#", ".", ".", "#", "#", "#"],
      ["#", "#", "#", "#", "#", ".", "#", "#", "."],
      ["#", "#", "#", "#", "#", ".", "#", "#", "."],
      [".", ".", "#", "#", ".", ".", "#", "#", "#"],
      ["#", ".", ".", ".", ".", "#", ".", ".", "#"]
    ]

    assert Day13.line_with_fixed_snudge(grid, [4]) == nil
  end
end
